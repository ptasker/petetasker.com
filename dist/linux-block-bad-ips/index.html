<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Blocking bad IPs | ðŸ”¥ Database Critical ðŸ”¥</title><meta name="description" content="Peter Tasker is a software developer located in Ottawa Ontario, Canada."><link rel="stylesheet" href="/_astro/_slug_.D_TV8Ibz.css"></head> <body> <div class="wrapper"> <header class="site-head"> <div class="site-mast container"> <div class="site-mast-left"> <h1 class="site-banner-title"> <a href="/">ðŸ”¥ Database Critical ðŸ”¥</a> </h1> </div> <div class="site-mast-right"> <a class="site-nav-item" href="https://www.linkedin.com/in/petertasker" target="_blank" rel="noopener noreferrer"> <img class="site-nav-icon" src="/_astro/linkedin.COXC03GI.svg" alt="LinkedIn"> </a> <a href="https://twitter.com/petetasker" class="site-nav-item" target="_blank" rel="noopener noreferrer"> <img class="site-nav-icon" src="/_astro/twitter.Cd1IKmxq.svg" alt="Twitter"> </a> <a class="site-nav-item" href="https://feedly.com/i/subscription/feed/https://petetasker.com/rss/" target="_blank" rel="noopener noreferrer"> <img class="site-nav-icon" src="/_astro/rss.BJRyKUDL.svg" alt="RSS Feed"> </a> </div> </div>  <div class="container"> <nav class="site-nav"> <div class="site-nav-right"> <a class="site-nav-button" href="/about"> <span class="label">About</span> </a> <a class="site-nav-button" href="/contact"> <span class="label">Contact</span> </a> <a class="site-nav-button" href="/uses"> <span class="label">Uses</span> </a> </div> </nav> </div> </header> <div class="bg-white-wrap"> <main class="container">  <article> <header> <h1>Blocking bad IPs</h1> <p class="date-row"> August 20, 2015 </p> </header> <p>This is more an informational post for myself, but hereâ€™s some nifty commands that help debug whatâ€™s going wrong on a server when things arenâ€™t going right.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>netstat -t</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>netstat -tn</span></span></code></pre>
<p>These are good for watching WHO is hitting your server and what their IP is. netstat -tn shows the unresolved address, so you should get the IPâ€™s of possible spammers</p>
<p>Once youâ€™ve got the IP(s) you can block them with iptables like so:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;pre class="bash">iptables -I INPUT -s &#x3C;IP ADDRESS> -j DROP</span></span></code></pre>
<p>Another good tool for watching network traffic is iftop. Youâ€™ll need to install this one via Yum or Apt though:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>Â iftop -N -i eth0</span></span></code></pre>
<p><a href="https://i2.wp.com/petetasker.com/wp-content/uploads/2015/08/1__ssh1.png?ssl=1"><img src="https://i2.wp.com/petetasker.com/wp-content/uploads/2015/08/1__ssh1.png?resize=525%2C435&#x26;ssl=1" alt="1__ssh"></a></p>
<p>And for overall machine health, nothing beats good old htop! Ahh, CPU usage back to normal.</p>
<p><a href="https://i2.wp.com/petetasker.com/wp-content/uploads/2015/08/1__ssh.png?ssl=1"><img src="https://i2.wp.com/petetasker.com/wp-content/uploads/2015/08/1__ssh.png?resize=525%2C412&#x26;ssl=1" alt="1__ssh"></a></p> <hr> </article>  </main> </div> <footer> <div class="container"> <hr> <p> <span class="muted"> <a href="https://thenounproject.com/search/?q=ecto-1&i=1367798">
Ecto-1
</a>
icon by Patengerie from the  <a href="http://thenounproject.com/">Noun Project</a> </span>
Â© 2025, Built with
  <a href="https://astro.build">Astro</a> </p> </div> </footer> </div> </body></html>